import org.jetbrains.kotlin.gradle.plugin.KotlinPlatformType

apply plugin: 'kotlin'
apply plugin: 'maven'
apply plugin: 'maven-publish'

tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).all {
    kotlinOptions {
        jvmTarget = "1.8"
    }
}

Properties gradleProperties = new Properties()
gradleProperties.load(new StringReader(new File(rootDir, "../gradle.properties").text))
ext.gradleProperties = gradleProperties

def version(String name) {
	if (name == "korge") return gradleProperties["version"]
	return gradleProperties["${name}Version"]
}

def setKDep(ExternalModuleDependency it) {
	//it.targetConfiguration = "default"
	//it.targetConfiguration = "runtime"
	it.attributes { attribute(KotlinPlatformType.attribute, KotlinPlatformType.jvm) }
}

dependencies {
	compile("org.jetbrains.kotlin:kotlin-stdlib-jdk8")
	compile("org.jetbrains.kotlin:kotlin-test")
	compile("org.jetbrains.kotlin:kotlin-test-junit")

	compile project(":korge-jvm-bundle")
}

publishing {
	publications {
		maven(MavenPublication) {
			groupId = project.group
			artifactId = project.name
			version = project.version

			from components.java
		}
	}
}
